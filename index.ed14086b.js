function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},o=t.parcelRequire7a9c;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},t.parcelRequire7a9c=o);var i=o("baSj9"),r=o("cTOKP"),c=o("31u3U"),l=o("7KwqR");let s;function d(){document.querySelector(".modal").classList.remove("modal--show"),document.body.classList.remove("stop-scroll")}window.addEventListener("click",(e=>{const t=document.querySelector(".modal");e.target===t&&d()})),window.addEventListener("keydown",(e=>{27===e.keyCode&&d()}));var u=o("7zQK0"),m=o("2gAtb"),p=o("2shzp");p=o("2shzp"),r=o("cTOKP"),m=o("2gAtb");r=o("cTOKP");const y=document.querySelector(".movie-list");async function g(e=1){try{const{data:{results:t}}=await p.default.get(`${r.BASE_URL}/trending/all/day`,{params:{api_key:r.API_KEY,page:e}});return t}catch(e){return e}}async function v(e){const t=await(0,u.getGenres)();return e.map((e=>({title:e.title?e.title:e.name,id:e.id,media_type:e.media_type,image:`${r.IMG_URL+e.poster_path}`,year:new Date(e.first_air_date?e.first_air_date:e.release_date).getFullYear(),genres:e.genre_ids.map(((e,n)=>n<2?t[e]?.name:2===n?"Other":n>2?"":void 0)).filter((e=>""!==e)).join(", ")})))}!async function(){const e=(await async function(e){try{return(await p.default.get(`${r.BASE_URL}/trending/all/day`,{params:{api_key:r.API_KEY,page:e}})).data}catch(e){return e}}(1)).total_pages;let t=1,n=1;const a=document.createElement("button");a.classList.add("arrow-right"),a.innerHTML='<img src="https://img.icons8.com/office/16/null/circled-chevron-right.png"/>';const o=document.createElement("button");function i(e){const t=document.querySelector(".movie-list");t.innerHTML="",g(e).then(v).then((e=>{t.innerHTML=e.map((e=>(0,m.default)(e))).join("")}))}function c(e){const t=document.createElement("li");t.classList.add("pagination__item"),t.innerText=e,n===e&&t.classList.add("pagination__item--active");return t.addEventListener("click",(t=>{n=e,i(n);let a=document.querySelector("li.pagination__item--active");a&&a.classList.remove("pagination__item--active"),t.target.classList.add("pagination__item--active")})),t}o.classList.add("arrow-left"),o.innerHTML='<img src="https://img.icons8.com/office/16/null/circled-chevron-left.png"/>',i(n),function(){const n=document.querySelector(".pagination"),i=document.createElement("ul");let r=10;i.classList.add("pagination__list");for(let e=0;e<r;e++){const t=c(e+1);i.appendChild(t)}n.appendChild(i),i.appendChild(a),a.addEventListener("click",(()=>{if(t+=1,r+=1,i.innerHTML="",i.insertAdjacentElement("afterbegin",o),r<e){for(let e=t;e<=r;e++){const t=c(e);i.appendChild(t)}let e=document.querySelectorAll(".pagination__item");e[0].classList.contains("pagination__item--active")&&(e[0].classList.remove("pagination__item--active"),e[0].classList.add("pagination__item--active"))}r===e&&a.remove(),i.appendChild(a)})),o.addEventListener("click",(()=>{if(t-=1,r-=1,i.innerHTML="",i.insertAdjacentElement("afterbegin",o),r<e){for(let e=t;e<=r;e++){const t=c(e);i.appendChild(t)}let e=document.querySelectorAll(".pagination__item");e[9].classList.contains("pagination__item--active")&&(e[9].classList.remove("pagination__item--active"),e[9].classList.add("pagination__item--active"))}10===r&&o.remove(),i.appendChild(a)}))}()}();var h=o("3HWqg"),f=(r=o("cTOKP"),o("gjiCh"));var _=e(o("amrNH")).template({1:function(e,t,n,a,o){var i,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,l="function",s=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<option class="options" value='+s(typeof(i=null!=(i=d(n,"id")||(null!=t?d(t,"id"):t))?i:c)===l?i.call(r,{name:"id",hash:{},data:o,loc:{start:{line:2,column:30},end:{line:2,column:36}}}):i)+">"+s(typeof(i=null!=(i=d(n,"name")||(null!=t?d(t,"name"):t))?i:c)===l?i.call(r,{name:"name",hash:{},data:o,loc:{start:{line:2,column:37},end:{line:2,column:45}}}):i)+"</option>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,o){var i;return null!=(i=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:1,column:0},end:{line:3,column:9}}}))?i:""},useData:!0}),L=o("aA8zZ"),b=(p=o("2shzp"),r=o("cTOKP"),m=o("2gAtb"),f=o("gjiCh"),o("6djQB"));const w=document.querySelector(".movie-list"),E=document.querySelector(".loader-container");let S={};async function T(e,t,n){try{const{data:{total_pages:a,results:o}}=await p.default.get(r.BASE_URL+e,{params:{api_key:r.API_KEY,page:t,with_genres:n}});switch(a){case 0:w.innerHTML='<p class="nothing-p">Nothing to show</p>';case 1:document.querySelector(".load-btn").classList.remove("load-btn-visible");case a>1:(0,b.addObserver)();case a===t||a<=1:(0,b.removeObserver)();default:document.querySelector(".load-btn").classList.remove("load-btn-visible")}return o}catch(e){console.error(e)}}async function q(e){try{const{data:{genres:t}}=await p.default.get(r.BASE_URL+e,{params:{api_key:r.API_KEY}});return t}catch(e){console.error(e)}}async function A(e){S=await async function(){if(0!==Object.entries(S).length)return S;if(0===Object.entries(S).length){const e=await q("/genre/movie/list");return[...await q("/genre/tv/list"),...e].forEach((e=>S[e.id]=e)),S}}();try{return await e.map((e=>({id:e.id,title:e.title?e.title:e.name,year:e.release_date?new Date(e.release_date?e.release_date:e.first_air_date).getFullYear():"Year unknown",image:e.poster_path?`${r.IMG_URL+e.poster_path}`:"https://www.gulftoday.ae/-/media/gulf-today/images/articles/opinion/2022/8/7/cinema.ashx?h=450&la=en&w=750&hash=EB12327C59FAEB577FBED56AF6BF2E12",overview:e.overview,genres:0===e.genre_ids.length?"Genre unknown":e.genre_ids.map(((e,t)=>{switch(t){case t<2:return S[e].name;case 2===t:return"Other";case t>2:return""}})).filter((e=>""!=e)).join(", ")})))}catch(e){console.error(e)}finally{(0,f.removeLoader)(E)}}async function M(e){w.innerHTML+=e.map((e=>(0,m.default)(e))).join("")}L=o("aA8zZ"),f=o("gjiCh"),b=o("6djQB");const k=document.querySelector("input[type='range']"),O=document.querySelector(".bubble"),H=document.querySelector('[name="by-name__select"]'),D=document.querySelector('[name="by-year"]'),C=document.querySelector(".page-heading"),j=document.querySelector(".movie-list"),x=document.querySelector(".loader-container"),$=document.querySelector(".pagination");let P=1;async function U(e){j.innerHTML="",(0,f.addLoader)(x),$.classList.add("visually-hidden"),C.textContent=`Sorted by title(${e}ending)`,B(),(0,L.changeEventListeners)((()=>I(`/discover/movie?sort_by=title.${H.value}`)));try{await T(`/discover/movie?sort_by=title.${e}`).then(A).then(M)}catch(e){console.log(e)}}async function R(e){(0,f.addLoader)(x),$.classList.add("visually-hidden"),(0,b.addObserver)(),j.innerHTML="",C.textContent=`Movies released in ${e}`,(0,L.changeEventListeners)((()=>I(`/discover/movie?primary_release_year=${D.value}`)));try{await T(`/discover/movie?primary_release_year=${e}`).then(A).then(M)}catch(e){console.log(e)}}async function I(e){P+=1,(0,f.addLoader)(x),(0,L.removeBtn)();try{await T(e,P).then(A).then(M)}catch(e){console.log(e)}}function B(){document.querySelector(".bubble").style.visibility="hidden"}const N=document.querySelector(".movie-list"),K=document.querySelector("#by-genre"),F=document.querySelector(".page-heading"),Q=document.querySelector(".loader-container"),Y=document.querySelector(".pagination");let W=1;async function z(){return await async function(){const e=await fetch(`${r.BASE_URL}/genre/movie/list?api_key=${r.API_KEY}`);if(e.ok)return await e.json();throw new Error(await e.text())}()}async function G(e){N.innerHTML="",(0,f.addLoader)(Q),Y.classList.add("visually-hidden"),F.textContent=`Movies of the ${K.options[K.selectedIndex].textContent} genre`,B(),(0,L.changeEventListeners)(J);try{await T(`/discover/movie?sort_by=title.&with_genres=${e}`).then(A).then(M)}catch(e){console.log(e)}}async function J(){W+=1,(0,f.addLoader)(Q),(0,L.removeBtn)();try{await T(`/discover/movie?sort_by=title.&with_genres=${K.value}`,W).then(A).then(M)}catch(e){console.log(e)}}!async function(){const e=(await z()).genres.map((e=>e));e.push({});const t=e.map((e=>_({el:e})));K.innerHTML="",K.insertAdjacentHTML("beforeend",t)}();var V;function Z(e,t,n){var a,o,i,r,c;function l(){var s=Date.now()-r;s<t&&s>=0?a=setTimeout(l,t-s):(a=null,n||(c=e.apply(i,o),i=o=null))}null==t&&(t=100);var s=function(){i=this,o=arguments,r=Date.now();var s=n&&!a;return a||(a=setTimeout(l,t)),s&&(c=e.apply(i,o),i=o=null),c};return s.clear=function(){a&&(clearTimeout(a),a=null)},s.flush=function(){a&&(c=e.apply(i,o),i=o=null,clearTimeout(a),a=null)},s}Z.debounce=Z,V=Z,(0,i.getCurrentPage)(),async function(){g(1).then(v).then((e=>{y.innerHTML=e.map((e=>(0,m.default)(e))).join("")}))}(),document.querySelector(".movie-list").addEventListener("click",(e=>{e.preventDefault();try{s=e.composedPath().find((e=>"A"===e.tagName)).dataset.type?e.composedPath().find((e=>"A"===e.tagName)).dataset.type:"movie";let t=e.target;for(;"A"!==t.nodeName&&null!==t.parentNode;)t=t.parentNode;if("A"===t.nodeName){const e=parseInt(t.id);!async function(e,t){const n=`${r.BASE_URL}/${s}/${e}?api_key=${r.API_KEY}`,a=document.querySelector(".modal"),o=await fetch(n,{headers:{"Content-Type":"application/json"}});if(200===o.status){const e=await o.json();e.imgPath=(u=e.poster_path,m=e.backdrop_path,p=r.IMG_URL,null===u?null===m?t:p+m:p+u),e.byRate=(i=e.vote_average.toFixed(1))>=7?"green":i>5?"orange":"red",e.rate=e.vote_average.toFixed(1),e.byPopularity=e.popularity.toFixed(1),e.byGenres=e.genres.map((e=>`${e.name}`)).join(", "),a.classList.add("modal--show"),document.body.classList.add("stop-scroll"),a.innerHTML=(0,l.default)(e);const n=document.querySelector(".modal__btn-watched");n.addEventListener("click",(function(t){t.preventDefault();let a=e;"ADD TO WATCHED"===n.innerHTML?n.innerHTML="REMOVE FROM WATCHED":(localStorage.removeItem("WatchedList",JSON.stringify(a)),n.innerHTML="ADD TO WATCHED"),(new(0,c.LocalStorageWatchedUtil)).addWatched(a)}));const s=document.querySelector(".modal__btn-queue");s.addEventListener("click",(function(t){t.preventDefault();let n=e;"ADD TO QUEUED"===s.innerHTML?s.innerHTML="REMOVE FROM QUEUED":(localStorage.removeItem("QueuedList",JSON.stringify(n)),s.innerHTML="ADD TO QUEUED"),(new(0,c.LocalStorageQueuedUtil)).addQueued(n)}))}else a.classList.add("modal--show"),document.body.classList.add("stop-scroll"),a.innerHTML='<div class="modal__card">\n     <div class="modal-plug""></div>\n    <button type="button" class="modal__btn-close"></button></div>';var i,u,m,p;document.querySelector(".modal__btn-close").addEventListener("click",(()=>d()))}(e,t.getElementsByTagName("img")[0].src)}}catch{console.log("click empty fild ))")}}));document.querySelector(".search-form").addEventListener("submit",h.onSubmit),null!==localStorage.getItem("theme")&&document.body.classList.add("dark");document.querySelector('[data-theme ="dark"]').addEventListener("click",(function(){document.body.classList.add("dark"),localStorage.setItem("theme","dark")}));document.querySelector('[data-theme ="light"]').addEventListener("click",(function(){document.body.classList.remove("dark"),localStorage.removeItem("theme")}));const X=document.querySelector("#by-genre");X.addEventListener("change",(()=>{G(X.value)}));const ee=document.querySelector('[name="by-name__select"]');ee.addEventListener("change",(()=>{U(ee.value)}));const te=document.querySelector('[name="by-year"]');te.addEventListener("input",(function(){O.style.visibility="visible";const e=k.value,t=k.min?k.min:0,n=k.max?k.max:100,a=Number(100*(e-t)/(n-t));O.innerHTML=e,O.style.left=`calc(${a}% + (${8-.15*a}px))`})),te.addEventListener("change",e(V)((()=>{R(te.value)}),300));
//# sourceMappingURL=index.ed14086b.js.map
