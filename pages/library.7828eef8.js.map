{"mappings":"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","sources":["src/js/library.js","src/js/libraryRender.js","src/js/renderModalOnLibrary.js"],"sourcesContent":["import { getCurrentPage } from './getCurrentPage';\nimport { render } from './libraryRender';\nimport { addListenerOnLibraryPage } from './renderModalOnLibrary';\n\nfunction storageLibraryChecker() {\n  if (localStorage.getItem('theme') !== null) {\n    document.body.classList.add('dark');\n  } else {\n    document.body.classList.remove('dark');\n  }\n}\n\nstorageLibraryChecker();\ngetCurrentPage();\n\nexport let watchedMovie = JSON.parse(localStorage.getItem('WatchedList'));\nexport let queuedMovie = JSON.parse(localStorage.getItem('QueuedList'));\nconst title = document.querySelector('.page-heading');\nconst queuedBtnLibrary = document.getElementById(\n  'js-navigationLibraryButtonQueue'\n);\nconst watchedBtnLibrary = document.getElementById(\n  'js-navigationLibraryButtonWatched'\n);\n\nrender(watchedMovie);\naddListenerOnLibraryPage();\nqueuedBtnLibrary.addEventListener('click', e => {\n  e.preventDefault();\n  queuedBtnLibrary.disabled = true;\n  watchedBtnLibrary.disabled = false;\n  title.textContent = 'Queued movie';\n  queuedMovie = JSON.parse(localStorage.getItem('QueuedList'));\n  render(queuedMovie);\n});\n\nwatchedBtnLibrary.addEventListener('click', e => {\n  e.preventDefault();\n  watchedBtnLibrary.disabled = true;\n  queuedBtnLibrary.disabled = false;\n  title.textContent = 'Watched movie';\n  watchedMovie = JSON.parse(localStorage.getItem('WatchedList'));\n  render(watchedMovie);\n});\n","import movieCardTpl from './../templates/movie-card.hbs';\nimport { defaultImg } from './searchinputLogic';\nimport { Notify } from 'notiflix';\nimport { notifyParams } from './notifyParams';\nimport { IMG_URL } from './API';\n\nexport function render(movie) {\n  const queuedList = document.querySelector('.movie-list');\n\n  try {\n    const markupArr = movie.map(elem => {\n      const movieDate = new Date(\n        elem.first_air_date ? elem.first_air_date : elem.release_date\n      ).getFullYear();\n\n      const forRenderArr = {\n        title: elem.title ? elem.title : elem.name,\n        id: elem.id,\n        image: elem.poster_path ? `${IMG_URL + elem.poster_path}` : defaultImg,\n        year: movieDate ? movieDate : '',\n\n        genres: elem.genres.map(elem => `${elem.name}`).join(', '),\n      };\n\n      return forRenderArr;\n    });\n\n    queuedList.innerHTML = markupArr.map(elem => movieCardTpl(elem)).join('');\n  } catch (error) {\n    Notify.failure('oooops! library is clear', notifyParams);\n  }\n}\n","import movieModalTpl from './../templates/movie-modal.hbs';\n\nimport {\n    LocalStorageWatchedUtil,\n    LocalStorageQueuedUtil,\n  } from './localStorage';\nimport { watchedMovie, queuedMovie} from './library';\nimport { render } from './libraryRender';\n\nconst modalEl = document.querySelector('.modal');\nconst body = document.querySelector('body');\nconst movieCards = document.querySelector('.movie-list');\nconst title = document.querySelector('.page-heading');\n\nexport function addListenerOnLibraryPage(){\nmovieCards.addEventListener('click', onListClick);\n\n}\n\n\nfunction onListClick(evt){\nevt.preventDefault();\n\nconst movieId = evt.path.find(elem => elem.tagName === 'A').getAttribute('id');\nlet movie = {};\n\n\n\nif (title.textContent === 'Watched movie') {\n    movie = watchedMovie.find(el => el.id === Number(movieId));\n} else {\n    movie = queuedMovie.find(el => el.id === Number(movieId));\n};\n\n\n\ntry {\n    localStorageRender(movie)\n} catch (error) {\n    console.log(error);\n}\n\n\n};\n\n\n\n\nexport function localStorageRender(movie){\n    modalEl.classList.add('modal--show')\n    body.classList.add('stop-scroll');\n\n    modalEl.innerHTML = movieModalTpl(movie);\n\n\n    addModalBtnLogic(movie);\n\n}\n\n\nfunction addModalBtnLogic(movie){\n\n    const addToWatchedBtn = document.querySelector('.modal__btn-watched');\n    addToWatchedBtn.addEventListener('click', onClickWatchedBtn);\n\nif (title.textContent === 'Watched movie') {\n    addToWatchedBtn.textContent = 'REMOVE FROM WATCHED'\n}\n\n    function onClickWatchedBtn(e) {\n      e.preventDefault();\n       \n      if (addToWatchedBtn.textContent === 'ADD TO WATCHED') {\n        addToWatchedBtn.innerHTML = 'REMOVE FROM WATCHED';\n        const storageClick = new LocalStorageWatchedUtil();\n        storageClick.addWatched(movie);\n      } else {\n        watchedMovie.splice(watchedMovie.indexOf(movie), 1);\n        render(watchedMovie);\n        addToWatchedBtn.innerHTML = 'ADD TO WATCHED';\n        localStorage.setItem('WatchedList',JSON.stringify(watchedMovie));\n       \n      }\n      closeModal();\n    }\n\n    const addToQueuedBtn = document.querySelector('.modal__btn-queue');\n    addToQueuedBtn.addEventListener('click', onClickQueuedBtn);\n\nif(title.textContent === 'Queued movie'){\n    addToQueuedBtn.textContent ='REMOVE FROM QUEUED';\n}\n\n    function onClickQueuedBtn(e) {\n      e.preventDefault();\n  \n      if (addToQueuedBtn.textContent === 'ADD TO QUEUED') {\n        addToQueuedBtn.innerHTML = 'REMOVE FROM QUEUED';\n        const storageClickQ = new LocalStorageQueuedUtil();\n        storageClickQ.addQueued(movie);\n      } else {\n      queuedMovie.splice(queuedMovie.indexOf(movie), 1);\n      render(queuedMovie);\n        addToQueuedBtn.innerHTML = 'ADD TO QUEUED';\n        localStorage.setItem('QueuedList', JSON.stringify(queuedMovie));\n        \n      }\n      closeModal();\n    }\n\n    const btnClose = document.querySelector('.modal__btn-close');\n    btnClose.addEventListener('click', () => closeModal());\n\n    window.addEventListener('click', evt => {\n        if (evt.target === modalEl) {\n          closeModal();\n        }\n      });\n      \n      window.addEventListener('keydown', evt => {\n        if (evt.keyCode === 27) {\n          closeModal();\n        }\n      });\n}\n\n\nfunction closeModal() {\n    modalEl.classList.remove('modal--show');\n    body.classList.remove('stop-scroll');\n  }"],"names":["$cRoku","parcelRequire","$8pYMx","$09aa8d942ddd898c$export$b3890eb0ae9dca99","movie","queuedList","document","querySelector","markupArr","map","elem","movieDate","Date","first_air_date","release_date","getFullYear","title","name","id","image","poster_path","$dNYR7","IMG_URL","$lgA99","defaultImg","year","genres","join","innerHTML","default","error","$iU1Pc","Notify","failure","$8Q6FC","notifyParams","$6Yqet","$b9e15d5bdc5b11dd$var$modalEl","$b9e15d5bdc5b11dd$var$body","$b9e15d5bdc5b11dd$var$movieCards","$b9e15d5bdc5b11dd$var$title","$b9e15d5bdc5b11dd$var$onListClick","evt","preventDefault","movieId","path","find","tagName","getAttribute","textContent","$93effc6fc56091ad$export$e630a04c474d2944","el","Number","$93effc6fc56091ad$export$813e6dabf056a001","classList","add","addToWatchedBtn","addEventListener","onClickWatchedBtn","e","$UL92Z","LocalStorageWatchedUtil","addWatched","splice","indexOf","localStorage","setItem","JSON","stringify","$b9e15d5bdc5b11dd$var$closeModal","addToQueuedBtn","onClickQueuedBtn","LocalStorageQueuedUtil","addQueued","window","target","keyCode","$b9e15d5bdc5b11dd$var$addModalBtnLogic","$b9e15d5bdc5b11dd$export$fa6d8c92753d4105","console","log","remove","getItem","body","getCurrentPage","parse","$93effc6fc56091ad$var$title","$93effc6fc56091ad$var$queuedBtnLibrary","getElementById","$93effc6fc56091ad$var$watchedBtnLibrary","disabled"],"version":3,"file":"library.7828eef8.js.map"}